<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_player</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-30</depth>
  <persistent>-1</persistent>
  <parentName>obj_solid</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Init
mov_dir=-1;
knockback_dir=-1;
knockback_spd=1;
scr_skill_inputs();


//mp_potential_settings(180, 5, 5, false);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Stats

//Damage
total_damage = 0;
base_damage = 0;
flat_damage = 0;
more_damage = 0;

//Defense
total_defense = 0;
base_defense = 0;
flat_defense = 0;
more_defense = 0;

total_defense_modifier = 1;

//Movement
total_move_speed = 0;
base_move_speed = 0;
more_move_speed = 0;

//Health
total_health = 0;
base_health = 0;
flat_health = 0;
more_health = 0;

//Cooldown
total_cd_reduc = 0;
max_cd_reduc = 0.6;

//Crit Chance
total_crit_chance = 0.05;

//Crit Damage
total_crit_damage = 0.5;

//Stun Recovery
total_stun_recovery = 0;
base_knockback_duration = room_speed;
knockback_duration = base_knockback_duration * (1-total_stun_recovery);

//Pickup Radius
total_pickup_radius = 150;

//Attack Speed
base_attack_speed = 1;
more_attack_speed = 0;
total_attack_speed = base_attack_speed * (1+more_attack_speed);
total_attack_speed_cd = (1 / total_attack_speed)*room_speed;


hp = total_health;

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///FSM
state_machine_init();
state_create("Stand",st_player_stand);
state_create("Walk",st_player_walk);
state_create("Knockback",st_player_knockback);
state_create("Cutscene",st_player_cutscene);
state_start("Stand");
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Buff System
buff_list = ds_list_create();
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///EXP
current_exp = 0;
current_level = 1;
max_level = 30;

//Required EXP per level
for(i=0;i&lt;30;i++)
{
    req_exp[i] = power(10+(i*2),2);
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Destroy ds
state_cleanup();
for(var i=0;i&lt;ds_list_size(buff_list);i++)
{
    ds_map_destroy(buff_list[| i])
}
ds_list_destroy(buff_list);

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///FSM
state_update();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Read Input
x_spd = keyboard_check(ord("D"))-keyboard_check(ord("A"));
y_spd = keyboard_check(ord("S"))-keyboard_check(ord("W"));


/*

x_spd = x_spd * spd;
y_spd = y_spd * spd;

if(place_meeting(x+x_spd,y,obj_wall))
{
    while(!place_meeting(x+sign(x_spd),y,obj_wall))
    {
        x+=sign(x_spd)
    }
    x_spd = 0   
}
x+=x_spd
if(place_meeting(x,y+y_spd,obj_wall))
{
    while(!place_meeting(x,y+sign(y_spd),obj_wall))
    {
        y+=sign(y_spd)
    }
    y_spd = 0
}

y+=y_spd
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///FSM
state_execute();
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Buff System
if(!ds_list_empty(buff_list))
{
    var list_size = ds_list_size(buff_list);
    for(var i = 0; i &lt; list_size;i++)
    {
        var cur_time = ds_map_find_value(buff_list[| i],"time");
        var buff_id = ds_map_find_value(buff_list[| i], "id");
        if(cur_time &gt; 0)
        {
            ds_map_replace(buff_list[| i],"time",cur_time-1);
        }
        else
        {
            scr_remove_buff(buff_id);
            ds_map_destroy(buff_list[| i ]);
            ds_list_delete(buff_list,i);
            break;
        }
    }
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///EXP System
if(current_exp &gt;= req_exp[current_level-1] &amp;&amp; current_level &lt; max_level)
{
    current_exp -= req_exp[current_level-1];
    current_level++;
}

draw_exp = scr_range_convert(0,req_exp[current_level-1],0,100,current_exp);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Range Convert
hp_convert = scr_range_convert(0,total_health,0,100,hp);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_self();
if(state_name == "Knockback") draw_text(x,y-8,"Stunned");
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw Buffs
draw_set_halign(fa_center);
for(i=0;i&lt;ds_list_size(buff_list);i++)
{
    var sprite = ds_map_find_value(buff_list[| i],"sprite");
    var time = ds_map_find_value(buff_list[| i],"time");
    draw_sprite(sprite,-1,view_xview[0]+view_wview[0]-32-(64*i),view_yview[0]+32)
    scr_text_outlined_scaled(view_xview[0]+view_wview[0]-32-(64*i),view_yview[0]+72,time/room_speed,c_white,c_black,1,1);
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///DEBUG
if(global.debug)
{
    draw_text(view_xview[0]+360,view_yview[0]+10,state_name);
    draw_circle(x,y,total_pickup_radius,true);
}


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="67">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Create Stat Sheet
if(instance_exists(obj_stat_sheet))
{
    with(obj_stat_sheet) instance_destroy();
}
else instance_create(0,0,obj_stat_sheet);

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
